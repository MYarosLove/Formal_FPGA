2.4 Formal Hardware Verification Techniques
Hardware verification is the part of the design flow in which the design is checked against its specification. In this realm, formal verification techniques aim to check the design correctness by mathematical reasoning rather than simulation or testing. In this process, the specification is first transformed into a set of temporal and logic formulas called properties and then a mathematical proof method checks whether the design fulfills these formulas under every legal input.
While the rest of the thesis is primarily focused on how to formally specify certain security requirements as properties, in this section we outline the proof methodology that is used for verifying UPEC properties. We first describe the Bounded Model Checking (BMC) approach and then proceed to elaborate Interval Property Checking (IPC), which is the proof method used within the UPEC verification approach.

2.4.1 Bounded Model Checking
Bounded Model Checking (BMC) [54] is a model checking approach which leverages the power of modern satisfiability solving (SAT solvers) to verify temporal properties of sequential circuits.
A SAT solver determines, for a given Boolean function, whether or not the function is satisfiable, i.e., whether or not there exists an input combination under which the function evaluates to “true”. In case the function is satisfiable, the SAT solver returns a set of values for the input variables under which the function evaluates to “true”. The computational complexity of this problem is, in the worst case, exponential in the number of variables in the function. Modern SAT solvers, however, employ various heuristic methods and can often deliver a solution in a reasonable time for rather large Boolean functions [55–58]. The advancement of these techniques motivated the use of SAT solvers for hardware verification by bounded model checking.
In bounded model checking, as the name suggests, the model checking problem is reduced to a finite bounded time interval. To this end, the temporal property is formulated for a finite time window of length k starting from a known state of the system, often the reset state. To transform the proof problem into a SAT problem, we need to create a Boolean function such that any valuation to its variables that satisfies the function is a counterexample to the specified property. In this way, if the function is proven to be unsatisfiable, it is equivalent to proving the absence of counterexamples within the bounded time window. This problem can be formulated by creating an unrolled circuit model.

A sequential circuit can be modeled as shown in Fig. 2.4, with I as the set of inputs and O as the set of outputs. The transition function δ computes the next state and the output function λ computes the output signal values as a function of input and current state. The circuit behavior over a finite time interval of length k can be expressed by unrolling the combinational part of the circuit and connecting the next-state output of λ to the current-state input of the next δ and λ functions (Fig. 2.5). Using this model, the temporal property can be expressed as a simple Boolean function, with the inputs of the circuit being the free variables of the function. Based on the unrolled circuit model, the SAT solver checks whether there exists any valuation to the inputs which can violate the property within k clock cycles from the state s0.

BMC is a powerful bug detection technique as it exhaustively searches through all possible valuations of inputs within the considered time window. However, when the property holds, it is only proven for a time window of k clock cycles, i.e., the property is only proven to be valid for states reachable from s0 within k clock cycles. To prove a property for all reachable states using BMC, k must be chosen such that it is at least as large as the sequential depth of the circuit. The sequential depth can be defined as the minimum number of clock cycles needed to reach all reachable states. It is usually infeasible for BMC to prove properties for the entire sequential depth of the circuit, due to the complexity of the unrolled model. As a result, BMC usually falls short of making guarantees about the correctness of the design and can only provide bounded proofs. A clear statement on the absence of bugs requires an unbounded proof, i.e., a proof that is globally valid and is not restricted to a bounded time interval.

2.4.2 Interval Property Checking
Interval Property Checking (IPC) is a SAT-based model checking approach that, similar to BMC, works with an unrolled circuit model. However, unlike BMC, it is capable of providing unbounded proofs for a certain class of properties called interval properties [44]. An interval property is a temporal formula that describes an implication such that both assumption (antecedent) and commitment (consequent) are described over a finite time interval. The key characteristic that enables IPC to deliver an unbounded proof based on a bounded circuit model is using a symbolic initial state in the unrolled circuit model.

Fig. 2.6 shows the computational model used for IPC. Similar to BMC, the circuit is unrolled for the time window of the property. The main difference here is that the starting state of the unrolled circuit model is a symbolic variable st rather than the reset state of the system. st is a free variable for the SAT solver similar to input variables, which can only be constrained by the property assumptions. With this computational model, the SAT solver also explores all possible valuations for st , which as a subset includes all reachable states of the system. Therefore, the proof result is unbounded and valid for all reachable states of the system.
The unbounded proof of IPC comes at the cost of possible false counterex- amples in the proof. By considering any possible valuation for st , the proof also includes unreachable states as the starting state of the unrolled model. If the property fails for a valuation of st which is unreachable, the provided counterex- ample is a false one since it cannot happen within the normal operation of the system. This problem must be addressed by adding reachability information to the starting state st in the form of invariants [59]. 
It worth noting that in IPC, false holds, i.e., false proof of absence of property violation, cannot occur since the proof result is valid for any reachable state. This characteristic makes IPC a perfect proof methodology for our security verification technique that can enable delivering formal security guarantees.This characteristic makes IPC a perfect proof methodology for our security verification technique that can enable delivering formal security guarantees.


2.4 Формальные методы верификации аппаратуры
Верификация аппаратуры - это часть процесса проектирования, в которой проект проверяется на соответствие спецификации. В этой области формальные методы верификации направлены на проверку корректности конструкции с помощью математических рассуждений, а не моделирования или тестирования. В этом процессе спецификация сначала преобразуется в набор временных и логических формул, называемых свойствами, а затем с помощью метода математического доказательства проверяется, удовлетворяет ли конструкция этим формулам при любых допустимых входных данных.
В то время как остальная часть диссертации посвящена формальному определению требований безопасности в виде свойств, в этом разделе мы описываем методологию доказательства, которая используется для проверки свойств UPEC. Сначала мы опишем подход Bounded Model Checking (BMC), а затем перейдем к описанию Interval Property Checking (IPC), который является методом доказательства, используемым в рамках подхода к верификации UPEC.

2.4.1 Проверка ограниченных моделей
Bounded Model Checking (BMC) [54] - это подход к проверке модели, который использует возможности современных решателей удовлетворительности (SAT solvers) для проверки временных свойств последовательных схем.
SAT-решатель определяет для заданной булевой функции, является ли эта функция удовлетворительной, т. е. существует ли такая комбинация входных данных, при которой функция оценивается как "истина". Если функция удовлетворительна, то SAT-решатель возвращает набор значений входных переменных, при которых функция оценивается как "истина". Вычислительная сложность этой задачи в худшем случае экспоненциальна количеству переменных в функции. Однако современные решатели SAT используют различные эвристические методы и часто могут находить решение за разумное время для достаточно больших булевых функций [55-58]. Развитие этих методов послужило причиной использования SAT-решателей для верификации аппаратуры методом проверки ограниченной модели.
При проверке по ограниченной модели, как следует из названия, задача проверки модели сводится к конечному ограниченному интервалу времени. Для этого временное свойство формулируется для конечного временного окна длины k, начиная с известного состояния системы, часто состояния сброса. Чтобы преобразовать задачу доказательства в SAT-задачу, нужно создать такую булеву функцию, что любая оценка ее переменных, удовлетворяющая функции, является контрпримером к заданному свойству. Таким образом, если доказать, что функция неудовлетворительна, то это будет эквивалентно доказательству отсутствия контрпримеров за ограниченное время. Эту задачу можно сформулировать, создав модель неразвернутой цепи.

Последовательная цепь может быть смоделирована, как показано на рис. 2.4, с I в качестве множества входов и O в качестве множества выходов. Функция перехода δ вычисляет следующее состояние, а функция выхода λ вычисляет значения выходного сигнала как функцию от входа и текущего состояния. Поведение схемы за конечный интервал времени длины k можно выразить, развернув комбинационную часть схемы и соединив выход следующего состояния λ с входом текущего состояния следующих функций δ и λ (рис. 2.5). С помощью этой модели временное свойство может быть выражено в виде простой булевой функции, свободными переменными которой являются входы схемы. Основываясь на развернутой модели схемы, SAT-решатель проверяет, существует ли какая-либо оценка входов, которая может нарушить свойство в течение k тактов из состояния s0.

BMC - это мощный метод обнаружения ошибок, поскольку он исчерпывающе перебирает все возможные оценки входов в рассматриваемом временном окне. Однако, когда свойство выполняется, оно доказывается только для временного окна в k тактов, т. е. свойство доказывается только для состояний, достижимых из s0 в течение k тактов. Чтобы доказать свойство для всех достижимых состояний с помощью BMC, k должно быть выбрано таким образом, чтобы оно было не меньше последовательной глубины схемы. Последовательная глубина может быть определена как минимальное количество тактов, необходимых для достижения всех достижимых состояний. Обычно для BMC невозможно доказать свойства для всей последовательной глубины схемы из-за сложности развернутой модели. В результате BMC обычно не дает гарантий правильности схемы и может предоставить только ограниченные доказательства. Для однозначного утверждения об отсутствии ошибок требуется неограниченное доказательство, то есть доказательство, которое является глобально верным и не ограничено ограниченным интервалом времени.

2.4.2 Проверка свойств интервалов
Interval Property Checking (IPC) - это подход к проверке модели на основе SAT, который, как и BMC, работает с моделью неразвернутой цепи. Однако, в отличие от BMC, он способен предоставлять неограниченные доказательства для определенного класса свойств, называемых интервальными свойствами [44]. Интервальное свойство - это временная формула, описывающая импликацию таким образом, что и предположение (антецедент), и обязательство (консеквент) описываются за конечный интервал времени. Ключевой характеристикой, которая позволяет IPC предоставлять неограниченное доказательство на основе модели ограниченной цепи, является использование символического начального состояния в модели неразвернутой цепи.

На рис. 2.6 показана вычислительная модель, используемая в IPC. Как и в BMC, схема разворачивается для временного окна свойства. Основное отличие заключается в том, что начальным состоянием развёрнутой модели цепи является символьная переменная st, а не состояние сброса системы. st - это свободная переменная для SAT-решателя, подобно входным переменным, которые могут быть ограничены только предположениями свойства. При такой вычислительной модели SAT-решатель также исследует все возможные значения для st, которые в качестве подмножества включают все достижимые состояния системы. Поэтому результат доказательства является неограниченным и действительным для всех достижимых состояний системы.
За неограниченное доказательство IPC приходится расплачиваться возможными ложными контрпримерами в доказательстве. Рассматривая любую возможную оценку для st , доказательство также включает недостижимые состояния в качестве начального состояния развёрнутой модели. Если свойство не выполняется для значения st, которое недостижимо, то представленный контрпример является ложным, поскольку он не может произойти в рамках нормальной работы системы. Эта проблема должна решаться путем добавления информации о достижимости к начальному состоянию st в виде инвариантов [59]. 
Стоит отметить, что в IPC ложные удержания, то есть ложное доказательство отсутствия нарушения свойства, невозможны, так как результат доказательства действителен для любого достижимого состояния. Эта особенность делает IPC идеальной методологией доказательства для нашего метода верификации безопасности, позволяющей предоставлять формальные гарантии безопасности. Эта особенность делает IPC идеальной методологией доказательства для нашего метода верификации безопасности, позволяющей предоставлять формальные гарантии безопасности.